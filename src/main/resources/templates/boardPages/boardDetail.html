<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>list</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <script th:src="@{/js/axios.min.js}"></script>
    <script th:src="@{/js/jquery.js}"></script>
    <style>
        .boardDetail {
            width: 500px;
            margin: 10px auto;
            text-align: center;
        }
    </style>
</head>
<body>
<th:block th:replace="commonPages/header :: header"></th:block>
<div class="boardDetail">
    <table class="table table-hover">
        <tr>
            <th>id</th>
            <td th:text="${board.id}"></td>
        </tr>
        <tr>
            <th>title</th>
            <td th:text="${board.boardTitle}"></td>
        </tr>
        <tr>
            <th>writer</th>
            <td th:text="${board.boardWriter}"></td>
        </tr>
        <tr>
            <th>date</th>
            <td th:text="*{#temporals.format(board.boardCreatedTime, 'yyyy-MM-dd HH:mm:ss')}"></td>
        </tr>
        <tr>
            <th>hits</th>
            <td th:text="${board.boardHits}"></td>
        </tr>
        <tr>
            <th>contents</th>
            <td th:text="${board.boardContents}"></td>
        </tr>
    </table>
    <div class="container">
        <button class="btn btn-primary" onclick="listReq()">목록</button>
        <button class="btn btn-warning" onclick="req('update')">수정</button>
        <button class="btn btn-danger" onclick="req('delete')">삭제</button>
    </div>
    <div id="pass-check">

    </div>
</div>
</body>
<script th:inline="javascript">
    const listReq = () => {
        location.href = "/board/";
    }

    const req = (value) => {
        console.log("value 값", value);
        const passCheckArea = document.getElementById("pass-check");
        // "" 안에 복사한 내용 붙여넣기 하면 알아서 html 문법으로 나옴
        passCheckArea.innerHTML = "<input type=\"text\" id=\"password\" placeholder=\"password\"> <br>\n" +
            "    <button class=\"btn btn-outline-dark\" onclick=\"passCheck('" + value + "')\">확인</button>";
    }

    const passCheck = (value) => {
        console.log(value);
        const password = document.getElementById("password").value;
        const passDB = [[${board.boardPass}]];
        const id = [[${board.id}]];
        if (password == passDB) {
            if (value == "update") {
                location.href = "/board/update/" + id;
            } else if (value == "delete") {
                // location.href = "/board/delete/" + id;
                axios({
                    method: "delete",
                    url: "/board/" + id,
                }).then(res => {
                    location.href = "/board/";
                }).catch(err => {
                    alert("삭제 실패");
                })
            }
        } else {
            alert("비밀번호가 일치하지 않습니다.")
        }
    }
</script>
</html>